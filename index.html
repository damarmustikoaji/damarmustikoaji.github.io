<!DOCTYPE html>
<html lang="id">
  <head>
    <!--- basic page needs
    ================================================== -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>damar</title>
    <script>
      document.documentElement.classList.remove('no-js');
      document.documentElement.classList.add('js');
    </script>
    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="css/vendor.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
    <!-- favicons
    ================================================== -->
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="manifest" href="site.webmanifest">
    <style>
      /* Basic reset for list */
      .s-about__list {
        list-style: none;
        padding: 0;
        margin: 0;
        display: grid;
        gap: 1rem;
      }

      /* Each experience row */
      .experience-item .company {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      /* Logo style (img or svg) */
      .company-logo {
        width: 40px;
        height: 40px;
        flex: 0 0 40px;
        border-radius: 8px;
        object-fit: cover;
        display: inline-block;
      }

      /* Fallback logo (initials) */
      .company-logo.fallback {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        background: #e0e0e0;
        color: #333;
        font-weight: 700;
        font-size: 14px;
        border-radius: 8px;
        width: 40px;
        height: 40px;
      }

      /* Text block */
      .company-meta {
        display: flex;
        flex-direction: column;
        line-height: 1.1;
      }

      /* Name / role / period visuals */
      .company-name {
        color: #111;
      }

      .company-role {
        color: #555;
        margin-top: 3px;
      }

      .company-period {
        color: #888;
        margin-top: 2px;
      }

      /* Responsive: logo smaller on narrow screens */
      @media (max-width: 480px) {
        .company-logo {
          width: 34px;
          height: 34px;
          flex: 0 0 34px;
        }
      }

      .experience-loader {
        display: flex;
        gap: 6px;
        margin: 10px 0 20px 0;
      }

      .loader-dot {
        width: 8px;
        height: 8px;
        background: #999;
        border-radius: 50%;
        animation: dotPulse 1s infinite ease-in-out;
      }

      .loader-dot:nth-child(2) {
        animation-delay: 0.2s;
      }

      .loader-dot:nth-child(3) {
        animation-delay: 0.4s;
      }

      @keyframes dotPulse {
        0% {
          transform: scale(0.7);
          opacity: 0.4;
        }

        50% {
          transform: scale(1);
          opacity: 1;
        }

        100% {
          transform: scale(0.7);
          opacity: 0.4;
        }
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
  </head>
  <body id="top">
    <!-- preloader
    ================================================== -->
    <div id="preloader">
      <div id="loader" class="dots-fade">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </div>
    <!-- page wrap
    ================================================== -->
    <div id="page" class="s-pagewrap">
      <!-- # site header 
        ================================================== -->
      <header class="s-header">
        <div class="row s-header__inner">
          <div class="s-header__block">
            <div class="s-header__logo">
              <a class="logo" href="index.html">
                <img src="images/logo.svg" alt="Homepage">
              </a>
            </div>
            <a class="s-header__menu-toggle" href="#0">
              <span>Menu</span>
            </a>
          </div>
          <!-- end s-header__block -->
          <nav class="s-header__nav">
            <ul class="s-header__menu-links">
              <li class="current">
                <a class="smoothscroll" href="#intro">Intro</a>
              </li>
              <li>
                <a class="smoothscroll" href="#about">About</a>
              </li>
              <li>
                <a class="smoothscroll" href="#skills-tech">Skills</a>
              </li>
              <li>
                <a class="smoothscroll" href="#work-history">Experience</a>
              </li>
              <li>
                <a class="smoothscroll" href="#portfolio">Portfolio</a>
              </li>
              <li>
                <a class="smoothscroll" href="#footer">Contact</a>
              </li>
            </ul>
            <!-- s-header__menu-links -->
          </nav>
          <!-- end s-header__nav -->
        </div>
        <!-- end s-header__inner -->
      </header>
      <!-- end s-header -->
      <!-- # intro
        ================================================== -->
      <section id="intro" class="s-intro target-section">
        <div class="row s-intro__content width-sixteen-col">
          <div class="column lg-12 s-intro__content-inner grid-block grid-16">
            <div class="s-intro__content-text">
              <div class="s-intro__content-pretitle text-pretitle" id="intro-pretitle">Hello,</div>
              <h1 class="s-intro__content-title" id="intro-title"> Loading... </h1>
              <div class="s-intro__content-btns">
                <a class="smoothscroll btn" href="#about">More About Me</a>
                <a class="smoothscroll btn btn--stroke" href="#footer">Get In Touch</a>
              </div>
              <!-- s-intro__content-btns -->
            </div>
            <!-- s-intro__content-text -->
          </div>
          <!-- s-intro__content-inner -->
        </div>
        <!-- s-intro__content -->
        <ul class="s-intro__social social-list"></ul>
        <div class="s-intro__content-media">
          <img src="images/intro-bg.jpg" srcset="images/intro-bg.jpg 1x, images/intro-bg.jpg 2x" alt="">
        </div>
        <!-- s-intro__content-media -->
        <div class="s-intro__btn-download">
          <a class="btn btn--stroke" href="https://ik.imagekit.io/wmqebf61j/damar-mustiko-aji-cv.pdf" download="Damar-Mustiko-Aji-CV.pdf"> Get My CV </a>
        </div>
        <div class="s-intro__scroll-down">
          <a href="#about" class="smoothscroll">
            <div class="scroll-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
                <path d="M11.178 19.569a.998.998 0 0 0 1.644 0l9-13A.999.999 0 0 0 21 5H3a1.002 1.002 0 0 0-.822 1.569l9 13z"></path>
              </svg>
            </div>
            <span class="scroll-text u-screen-reader-text">Scroll Down</span>
          </a>
        </div>
        <!-- s-intro__scroll-down -->
      </section>
      <!-- end s-intro -->
      <!-- # about
        ================================================== -->
      <section id="about" class="s-about target-section">
        <div class="row s-about__content">
          <div class="column xl-12">
            <div class="section-header" data-num="01">
              <h2 class="text-display-title">About Me.</h2>
            </div>
            <!-- end section-header -->
            <div id="summary-container">
              <p class="attention-getter"></p>
            </div>
            <!-- grid-list-items -->
          </div>
          <!--end column -->
        </div>
        <!--end s-about__content -->
      </section>
      <!-- end s-about -->
      <!-- =========================================================
     SKILLS & TECH STACK SECTION — CLEAN MODERN STYLE
========================================================= -->
      <section id="skills-tech" class="s-skills target-section">
        <div class="row">
          <div class="column xl-12">
            <div class="section-header" data-num="02">
              <h2 class="text-display-title">Skills & Tech Stack.</h2>
            </div>
          </div>
        </div>
        <div class="row s-skills__content">
          <div class="column xl-10 lg-12">
            <!-- Skills -->
            <div class="skills-group">
              <h4 class="skills-title">Skills</h4>
              <div class="skills-list" id="skills-pill-list">
                <!-- AUTO FROM API -->
              </div>
            </div>
            <!-- Tech Stack -->
            <div class="skills-group">
              <h4 class="skills-title">Tools & Technologies</h4>
              <div class="skills-list" id="tech-pill-list">
                <!-- AUTO FROM API -->
              </div>
            </div>
          </div>
        </div>
      </section>
      <!-- =============================================
     WORK HISTORY SECTION
================================================= -->
      <section id="work-history" class="target-section">
        <div class="row">
          <div class="column xl-12">
            <div class="section-header" data-num="03">
              <h2 class="text-display-title">Experience.</h2>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="column xl-10 lg-12">
            <div class="timeline">
              <!-- ITEM 1 -->
            </div>
          </div>
        </div>
      </section>
      <!-- # works
        ================================================== -->
      <section id="portfolio" class="s-works target-section">
        <div class="row">
          <div class="column xl-12">
            <div class="section-header" data-num="04">
              <h2 class="text-display-title">Portfolio.</h2>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="portfolio-grid" id="portfolio-wrapper">
            <!-- ITEM AKAN DIISI AUTOMATIS OLEH API -->
          </div>
        </div>
      </section>
      <!-- end s-works -->
      <!-- # footer 
        ================================================== -->
      <footer id="footer" class="s-footer target-section">
        <div class="row">
          <div class="column lg-12">
            <div class="section-header light-on-dark" data-num="05">
              <h2 class="text-display-title">Get In Touch.</h2>
            </div>
            <!-- end section-header -->
          </div>
        </div>
        <div class="row s-footer__content">
          <div class="column xl-6 md-12 s-footer__block s-footer__about">
            <p id="getInTouch" class="attention-getter">
              <!-- Akan diisi dari API -->
            </p>
          </div>
          <div class="column xl-6 md-12 s-footer__block s-footer__site-links">
            <div class="row">
              <div class="column xl-4 lg-5 md-6 tab-12">
                <!-- <h5>Follow Me</h5> -->
                <!-- <ul class="link-list"></ul> -->
              </div>
              <div class="column xl-6 md-6 tab-12">
                <h5>Contact Me</h5>
                <ul class="link-list"></ul>
              </div>
            </div>
          </div>
          <!-- end section-footer__site-links -->
        </div>
        <!-- end section-footer__content -->
        <div class="row s-footer__buttons">
          <div class="column xl-6 tab-12">
            <a class="btn btn--primary btn--large u-fullwidth">Message Me</a>
          </div>
          <div class="column xl-6 tab-12">
            <a href="https://ik.imagekit.io/wmqebf61j/damar-mustiko-aji-cv.pdf" class="btn btn--stroke btn--large u-fullwidth" download="Damar-Mustiko-Aji-CV.pdf">Get My CV</a>
          </div>
        </div>
        <!-- end section-footer__buttons -->
        <div class="row s-footer__bottom">
          <div class="column xl-6 lg-12">
            <p class="ss-copyright">
              <span>© Copyright damar ~ somm.my.id <span id="current-year"></span>
              </span>
            </p>
          </div>
          <!-- Tambahkan ini di bawah, sebelum </body> -->
          <script>
            // ambil elemen dan set current year
            document.getElementById("current-year").textContent = new Date().getFullYear();
          </script>
        </div>
        <!-- end section-footer__bottom -->
        <div class="ss-go-top">
          <a class="smoothscroll" title="Back to Top" href="#top">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="fill: rgba(0, 0, 0, 1);transform: ;msFilter:;">
              <path d="M5.536 21.886a1.004 1.004 0 0 0 1.033-.064l13-9a1 1 0 0 0 0-1.644l-13-9A1 1 0 0 0 5 3v18a1 1 0 0 0 .536.886z"></path>
            </svg>
          </a>
          <span>Back To Top</span>
        </div>
        <!-- end ss-go-top -->
      </footer>
      <!-- end s-footer -->
    </div>
    <!-- end page-wrap -->
    <!-- Java Script
    ================================================== -->
    <script src="js/plugins.js"></script>
    <script src="js/main.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
      const GAS_BASE_URL = "https://script.google.com/macros/s/AKfycbzfot4xVc_0gnj5VaUTRHXKY7ndO6RDof2ngR5xiQQVSAqubzT98Gswa0EeV-jg0A1t4A/exec";
      const ICONS = {
        linkedin: `
        
													
													
													
													<svg
														xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" style="fill:rgba(0,0,0,1);">
														<path d="M4.98 3.5C4.98 4.604 4.084 5.5 2.98 5.5C1.876 5.5 0.98 4.604 0.98 3.5C0.98 2.396 1.876 1.5 2.98 1.5C4.084 1.5 4.98 2.396 4.98 3.5ZM.5 8.5H5.5V22H.5V8.5ZM8.5 8.5H13.3V10.3H13.36C13.96 9.3 15.22 8.2 17.26 8.2C21.14 8.2 22 10.7 22 14.4V22H17V15.3C17 13.7 16.96 11.7 14.86 11.7C12.72 11.7 12.4 13.4 12.4 15.2V22H7.4V8.5H8.5Z"></path>
													</svg>
    `,
        github: `
        
													
													
													
													<svg
														xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" style="fill:rgba(0,0,0,1);">
														<path d="M12 0.297C5.373 0.297 0 5.67 0 12.297c0 5.302 3.438 9.8 8.205 11.387
                    0.6 0.113 0.82-0.26 0.82-0.577 0-0.285-0.01-1.04-0.015-2.04
                    -3.338 0.726-4.042-1.61-4.042-1.61-0.546-1.387-1.333-1.756-1.333-1.756
                    -1.09-0.745 0.083-0.73 0.083-0.73 1.205 0.085 1.84 1.236 1.84 1.236
                    1.07 1.835 2.807 1.305 3.492 0.998 0.107-0.776 0.42-1.305 0.763-1.605
                    -2.665-0.305-5.466-1.333-5.466-5.931 0-1.31 0.469-2.381 1.236-3.221
                    -0.124-0.303-0.536-1.523 0.117-3.176 0 0 1.008-0.322 3.301 1.23
                    0.957-0.266 1.983-0.399 3.003-0.404 1.02 0.005 2.047 0.138 3.006 0.404
                    2.291-1.552 3.297-1.23 3.297-1.23 0.655 1.653 0.243 2.873 0.119 3.176
                    0.77 0.84 1.234 1.911 1.234 3.221 0 4.61-2.807 5.624-5.479 5.921
                    0.431 0.372 0.816 1.102 0.816 2.222 0 1.604-0.015 2.896-0.015 3.286
                    0 0.319 0.216 0.694 0.825 0.576C20.565 22.092 24 17.593 24 12.297
                    24 5.67 18.627 0.297 12 0.297z"></path>
													</svg>
    `,
        email: `
        
													
													
													
													<svg
														xmlns="http://www.w3.org/2000/svg" width="24" height="24"
            viewBox="0 0 24 24" style="fill:rgba(0,0,0,1);">
														<path d="M2 6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6zm3.519 0L12 11.671 18.481 6H5.52zM20 7.329l-7.341 6.424a1 1 0 0 1-1.318 0L4 7.329V18h16V7.329z"></path>
													</svg>
    `
      };
      async function loadAll() {
        try {
          const response = await fetch(`${GAS_BASE_URL}?all=true`);
          const data = await response.json();
          // -----------------------------
          // INTRO
          // -----------------------------
          document.getElementById("intro-title").innerHTML = data.intro;
          // -----------------------------
          // SUMMARY
          // -----------------------------
          const summaryParagraphs = data.summary.split(/\n\s*\n/).map(p => `
													
													
													
													<p class="attention-getter">${p}</p>`).join("");
          document.getElementById("summary-container").innerHTML = summaryParagraphs;
          // -----------------------------
          // SET CV URL FROM API
          // -----------------------------
          if (data.cvfiles && data.cvfiles.length > 0) {
            const cvUrl = data.cvfiles[0].url;
            // tombol CV di intro
            const introCvBtn = document.querySelector(".s-intro__btn-download a");
            introCvBtn.href = cvUrl;
            // tombol CV di footer
            const footerCvBtn = document.querySelector(".s-footer__buttons a.btn--stroke");
            footerCvBtn.href = cvUrl;
            // nama file optional
            introCvBtn.setAttribute("download", "Damar-Mustiko-Aji-CV.pdf");
            footerCvBtn.setAttribute("download", "Damar-Mustiko-Aji-CV.pdf");
          }
          // -----------------------------
          // GET IN TOUCH
          // -----------------------------
          document.getElementById("getInTouch").innerHTML = data.getInTouch.replace(/\n/g, " < br > ");
          // -----------------------------
          // WORK HISTORY
          // -----------------------------
          if (data.experiences && Array.isArray(data.experiences)) {
            const timelineContainer = document.querySelector(".timeline");
            timelineContainer.innerHTML = ""; // clear static items
            data.experiences.forEach(item => {
              const logo = item.logo ? `
													
													<img src="${item.logo}" class="company-logo" alt="${item.company}">` : `
														
														<div class="company-logo fallback">${item.company?.substring(0,2).toUpperCase()}</div>`;
              const html = `
      
														
														<div class="timeline-item">
															<div class="timeline-role">${item.role || "-"}</div>
															<div class="timeline-company">${item.company || "-"}</div>
															<div class="timeline-period">${item.period} ${item.location || ""}</div>
															<div class="timeline-desc">
          ${item.description || ""}
        </div>
														</div>
    `;
              timelineContainer.innerHTML += html;
            });
          }
          // -----------------------------
          // SKILLS
          // -----------------------------
          document.getElementById("skills-pill-list").innerHTML = data.skills.map(s => `
														
														<span class="pill">${s.value}</span>`).join("");
          // -----------------------------
          // TOOLS
          // -----------------------------
          document.getElementById("tech-pill-list").innerHTML = data.tools.map(s => `
														
														<span class="pill">${s.value}</span>`).join("");
          // -----------------------------
          // CONTACTS (Intro icons + footer list + Message Me)
          // -----------------------------
          const introSocial = document.querySelector(".s-intro__social");
          const footerEmailList = document.querySelector(".s-footer__site-links .column:nth-child(2) .link-list");
          const messageMeBtn = document.querySelector(".s-footer__buttons a.btn--primary");
          introSocial.innerHTML = "";
          footerEmailList.innerHTML = "";
          data.contacts.forEach(c => {
            const lower = c.name.toLowerCase();
            introSocial.insertAdjacentHTML("beforeend", `
                
															
														
														
														<li>
															<a href="${c.link}" target="_blank">
                        ${ICONS[lower] || ""}
                        
																	
																
																
																<span class="u-screen-reader-text">${c.value}</span>
															</a>
														</li>
            `);
            footerEmailList.insertAdjacentHTML("beforeend", `
                
															
														
														
														<li>
															<a href="${c.link}">${c.value}</a>
														</li>
            `);
            messageMeBtn.href = c.link;
          });
        } catch (err) {
          console.error("Error loadAll():", err);
        }
      }
      async function loadPortfolio() {
        try {
          const response = await fetch(`${GAS_BASE_URL}?sheet=portfolios`);
          const portfolios = await response.json();
          const wrapper = document.getElementById("portfolio-wrapper");
          wrapper.innerHTML = "";
          portfolios.forEach((item, index) => {
            const id = `portfolio-detail-${index}`;
            const image = item.image || "images/placeholder.png";
            // CARD PORTFOLIO
            const card = `
        
														<div class="portfolio-card">
															<a href="#${id}" 
             class="glightbox-portfolio" 
             data-glightbox="type: inline" 
             data-gallery="portfolio">
																<img src="${image}" alt="${item.title}" class="portfolio-image" />
																<div class="portfolio-content">
																	<div class="portfolio-title">${item.title}</div>
																	<div class="portfolio-desc">${item.description}</div>
																</div>
															</a>
														</div>
														<!-- HIDDEN POPUP MODAL CONTENT -->
														<div id="${id}" class="glightbox-portfolio-detail" style="display:none;">
															<h2 class="portfolio-detail-title">${item.title}</h2>
															<div class="portfolio-tags">
            ${item.tags}
          </div>
															<p>${item.description}</p>
															<img class="portfolio-detail-img" src="${image}" />
														</div>
      `;
            wrapper.insertAdjacentHTML("beforeend", card);
          });
          // INIT GLIGHTBOX
          GLightbox({
            selector: ".glightbox-portfolio",
            touchNavigation: true,
            loop: true,
            zoomable: false
          });
        } catch (err) {
          console.error("Error loading portfolio:", err);
        }
      }
      // Jalankan hanya 1 kali
      loadAll();
      loadPortfolio();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
  </body>
</html>